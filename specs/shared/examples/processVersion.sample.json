{
  "processId": "proc-metrics-hourly",
  "version": 1,
  "enabled": true,
  "sourceRequest": {
    "method": "GET",
    "path": "/metrics/query",
    "headers": {
      "Authorization": "Bearer ${dynatraceToken}"
    },
    "queryParams": {
      "metricSelector": "builtin:host.cpu.usage",
      "resolution": "1m"
    }
  },
  "dsl": {
    "profile": "jsonata",
    "text": "$.result.{timestamp: timestamp, hostName: host, cpuUsagePercent: cpu*100}"
  },
  "outputSchema": {
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "type": "object",
    "properties": {
      "timestamp": {
        "type": "string"
      },
      "hostName": {
        "type": "string"
      },
      "cpuUsagePercent": {
        "type": "number",
        "minimum": 0,
        "maximum": 100
      }
    },
    "required": [
      "timestamp",
      "hostName",
      "cpuUsagePercent"
    ],
    "additionalProperties": true
  },
  "sampleInput": {
    "result": [
      {
        "timestamp": "2026-01-01T00:00:00Z",
        "host": "srv01",
        "cpu": 0.73
      }
    ]
  }
}
